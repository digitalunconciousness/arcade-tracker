{% extends "base.html" %}

{% block content %}
<h1>Add New Game</h1>

<form method="POST" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <div class="form-group">
        <label for="name">Game Name *</label>
        <input type="text" id="name" name="name" required>
    </div>
    
    <div class="form-group">
        <label for="manufacturer">Manufacturer</label>
        <input type="text" id="manufacturer" name="manufacturer" placeholder="e.g. Namco, Capcom, Atari">
    </div>
    
    <div class="form-group">
        <label for="year">Year</label>
        <input type="number" id="year" name="year" min="1970" max="2030" placeholder="e.g. 1981">
    </div>
    
    <div class="form-group">
        <label for="genre">Genre</label>
        <input type="text" id="genre" name="genre" placeholder="e.g. Maze, Shooter, Fighting">
    </div>
    
    <div class="form-group">
    <div class="form-group">
        <label for="location">Location *</label>
        <select id="location" name="location" required>
            <option value="Warehouse">Warehouse</option>
            <option value="Floor">Floor</option>
            <option value="Shipped">Shipped</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="status">Status</label>
        <select id="status" name="status">
            <option value="Working">Working</option>
            <option value="Being_Fixed">Being Fixed</option>
            <option value="Not_Working">Not Working</option>
            <option value="Retired">Retired</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="coins_per_play">Coins Per Play ($)</label>
        <input type="number" id="coins_per_play" name="coins_per_play" step="0.01" value="0.25" min="0">
    </div>
    
    <div class="form-group">
        <label for="counter_status">Counter Status</label>
        <select id="counter_status" name="counter_status" onchange="toggleCounterFields()">
            <option value="Working">Working Counter</option>
            <option value="No_Counter">No Counter</option>
            <option value="Broken_Counter">Broken Counter</option>
        </select>
    </div>
    
    <div class="form-group" id="initial_coin_count_group">
        <label for="initial_coin_count">Initial Coin Count (Baseline Plays)</label>
        <input type="number" id="initial_coin_count" name="initial_coin_count" min="0" placeholder="0">
        <small style="color: var(--text-secondary);">ðŸ’° If this machine already has plays on it, enter the current coin counter reading to set a baseline</small>
    </div>
    
    <div class="form-group" id="counter_notes_group" style="display: none;">
        <label for="counter_notes">Counter Notes</label>
        <textarea id="counter_notes" name="counter_notes" rows="2" placeholder="Additional details about the counter status..."></textarea>
    </div>
    
    <div class="form-group">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" rows="3" placeholder="Any additional notes about this game..."></textarea>
    </div>
    
    <div style="display: flex; gap: 10px; align-items: center; margin-top: 20px;">
        <button type="submit" class="btn btn-success">âœ… Add Game</button>
        <a href="{{ url_for('games_list') }}" class="btn" style="background: #6c757d; color: white; text-decoration: none;">Cancel</a>
    </div>
</form>

<script>
function toggleCounterFields() {
    const counterStatus = document.getElementById('counter_status').value;
    const coinCountGroup = document.getElementById('initial_coin_count_group');
    const counterNotesGroup = document.getElementById('counter_notes_group');
    
    if (counterStatus === 'Working') {
        coinCountGroup.style.display = 'block';
        counterNotesGroup.style.display = 'none';
    } else {
        coinCountGroup.style.display = 'none';
        counterNotesGroup.style.display = 'block';
    }
}
</script>
{% endblock %}
